<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    我是发送界面
    <button id="sendmsg" onclick="sendMsg()">发送监听</button>
    <script>
        var targetPost;
        function sendMsg(){
            console.log("我来发送");
            window.postMessage({
                act: 'myresponse',
                msg:{
                    name:'zhang'
                }
            },"*");
            window.postMessage({
          	act: 'response',
          	msg: {
                type:'EOPEN_NOMAL_AGREE_2.0_PC',
          	    answer: '成功'
          	}
          	}, '*');
            mydataFunction();
        }
        document.onreadystatechange = function(e){
            if(document.readyState == 'complete'){
                window.addEventListener('message',function(event){
                    console.log("index openheml addevent is run");
                    console.log(event.origin);
                    console.log(event.data);
                    console.log(event);
                },false);
            }
        }
        // document.onreadystatechange = function(e) {
        //     if (document.readyState === 'complete') {
        //         window.addEventListener('message', receiveMessage, false);
        //     }
        // };

        // function receiveMessage(event) {
           
        //     if (event.origin !== "http://127.0.0.1:5500/indexopen.html") {
        //         return;
        //     }
        //     console.log('message', event.data);
        //     console.log('origin', event.source);
        //     targetPost = event;
        //     // document.write(event.data);
           
        //     // 假设你已经验证了所受到信息的origin (任何时候你都应该这样做), 一个很方便的方式就是把enent.source
        //     // 作为回信的对象，并且把event.origin作为targetOrigin
        //     // event.source.postMessage("hi there yourself!  the secret response " + "is: rheeeeet!", event.origin);
        // }
    </script>
</body>
</html>